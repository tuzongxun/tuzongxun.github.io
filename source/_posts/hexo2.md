---
title: hexo博客迁移记录
date: 2020-6-19 08:55:29
categories: hexo
toc: true  //在此处设定是否开启目录，需要主题支持。
tags: hexo
---
## 背景
电脑出故障重装了系统，导致相应的一些软件都要重装。
重装git、node.js和hexo后，发现原本的hexo功能无法全部正常使用，一番处理后便有了如下的操作记录。

<!--more-->

## 要点记录
### 配置sshkey
使用`hexo d`命令把hexo博客成功部署到github，除了需要配置正确的github地址外，还需要相应的权限配置，实际就是用户名密码以及sshkey。
由于sshkey实际保存在用户目录下，windows系统就是c盘，所以重装系统后之前的sshkey自然也被清除了，需要重新生成和配置，具体步骤可参考如下文章：
https://blog.csdn.net/u013778905/article/details/83501204

这里对生成sshkey的命令做一个简单记录：
```
ssh-keygen -t rsa -C "1160569243@qq.com"
```

### 博客迁移
迁移的最终目的是需要能够在之前的内容基础上进行操作并成功部署到github上，首先还是需要本地初始化好hexo，并且安装好相应的基础依赖，和一开始创建hexo博客操作一样，命令如下：
```
hexo init hexo
npm install 
```

初始化之后，可以使用hexo常规操作本地运行一下，保证基础环境是正常可用的。然后需要把部分原来的内容复制到新的目录中，主要是如下一个文件个三个文件夹：
>_config.yml
themes
source
scaffolds

这里_config.yml是主配置文件，themes里是主题模板，实际上这个可以不用全部复制，如果只想保留当前使用的主题，只需要复制需要的那个主题即可。
source里是博客等源文件，也是最重要的我们自己创作的内容；scaffolds里内容较简单，应该是影响运行的内容，这部分看网上说就直接复制了，未做必要性验证。

>注：由于我是电脑重装系统，所以上述文件均还存在，如果是电脑完全坏了，或许上边文件就找不回来了。所以另一个保险操作就是，把本地文件新建一个分支，然后上传上述四个内容到github新分支上。则博客运行使用master分支，源文件保存在新分支以备用。

上边文件复制之后，由于特定主题可能还有依赖的插件，因此需要再次智行npm命令安装依赖：
```
npm install
```

上述操作之后，我以为就可以正常使用了，本地运行也确实是正常的，依次执行了如下命令：
```
hexo clean
hexo g
hexo s
hexo d
```

但是在最后一步部署到github的时候却失败了，提示如下：
```
Deployer not found: git
```

失败的原因是因为没有安装hexo部署到git的插件，执行如下命令安装一下即可：
```
npm install hexo-deployer-git --save
```

部署插件安装完成后再次执行`hexo d`就成功部署到github，并且最新的改动也可以成功在页面展现，至此，博客迁移完成。